{% extends "base_static.html" %} {% block title %}Password Reset{% endblock %} {% block content %}

<style>
    .progress {
        display: none;
    }

    .error-list {
        width: 200px;
        display: inline-block;
    }
</style>

<section id="login">
    
    <div id="loginbox" class="panel panel-none">
        <div class="panel-body">
        	<h4>Reset Password</h4>
        	<form action="/forgot/reset" method="POST">{% csrf_token %}
        		<input type="hidden" name="token" value="{{token}}">
        		<input type="hidden" name="uuid" value="{{uuid}}">
        		<div class="form-group">
        		    <label for="password">Password</label>
        		    <input type="password" class="form-control" id="password" name="new_password1">
        		</div>
        		<div class="form-group">
        		    <label for="password">Confirm Password</label>
        		    <input type="password" class="form-control" id="password2" name="new_password2">
        		</div>
        		<h4 id="password-strength">
        		    
        		</h4>
        		<button class="btn btn-primary btn-block">RESET</button>
        	</form>
        </div>
<!--         <div class="panel-footer text-center">
            <span>Powered by </span>
            <img src="/static/img/brand.png" alt="">
        </div> -->
    </div>

</section>



<script>
    $(document).ready(function () {
        var desc = new Array();
        desc[0] = "Very Weak";
        desc[1] = "Weak";
        desc[2] = "Better";
        desc[3] = "Medium";
        desc[4] = "Strong";
        desc[5] = "Strongest";

        var bClass = new Array();
        bClass[0] = "has-error";
        bClass[1] = "has-error";
        bClass[2] = "has-warning";
        bClass[3] = "has-success";
        bClass[4] = "has-success";
        bClass[5] = "has-success";

        var $pwd = $("#password");
        var $pwd_strength = $("#password-strength");
        $("#password").on("keyup", function(evt){
            var s = $pwd.val().strength();
            $pwd_strength.text(desc[s]);
            $pwd.parent().removeClass("has-error has-warning has-success").addClass(bClass[s]);
        });

        $("form").on("submit", function(evt){
            var s = $pwd.val().strength();
            if (s < 3) {
                $pwd_strength.text("PASSWORD NOT STRONG ENOUGH");
                evt.preventDefault();
                return false;
            }

            var p1 = $("#password").val();
            var p2 = $("#password2").val();
            if (p1 != p2) {
            	$pwd_strength.text("PASSWORD DO NOT MATCH");
            	evt.preventDefault();
            	return false;
            }
        })
    });
</script>

{% endblock content %}

